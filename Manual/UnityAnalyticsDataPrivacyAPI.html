<!DOCTYPE html><html class="no-js" lang="zh_CN">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<meta property="og:title" content="Unity Analytics DataPrivacy API - Unity Manual">
<title>Unity Analytics DataPrivacy API - Unity Manual</title>
<meta name="description" content="The DataPrivacy class configures the Unity Analytics service based on the player&amp;#8217;s data privacy management choices.">
<meta property="og:description" content="The DataPrivacy class configures the Unity Analytics service based on the player&amp;#8217;s data privacy management choices.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFiles/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script>
      var docs_type = 'Manual';
      var lang = 'zh_CN';
      var page = 'UnityAnalyticsDataPrivacyAPI';
      if(!page) page = 'index';
      var version = '2018.1';
      var docs_versions = [{version: '2019.3',version_string: '2019.3'},{version: '2019.2',version_string: '2019.2'},{version: '2019.1',version_string: '2019.1'},{version: '2018.4',version_string: '2018.4'},{version: '2018.3',version_string: '2018.3'},{version: '2018.2',version_string: '2018.2'},{version: '2018.1',version_string: '2018.1'},{version: '2017.4',version_string: '2017.4'},{version: '2017.3',version_string: '2017.3'},{version: '2017.2',version_string: '2017.2'},{version: '2017.1',version_string: '2017.1'},{version: '5.6',version_string: '560'},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/zh_CN/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/ja/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/es/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html" hreflang="es">
<link rel="alternate" href="https://docs.unity3d.com/kr/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/2018.1/Documentation/Manual/UnityAnalyticsDataPrivacyAPI.html" hreflang="x-default">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2018.1</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.3" href="/zh_CN/2019.3/Manual/UnityAnalyticsDataPrivacyAPI.html">2019.3</a></li>
<li><a class="docs_version_url_2019.2" href="/zh_CN/2019.2/Manual/UnityAnalyticsDataPrivacyAPI.html">2019.2</a></li>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/UnityAnalyticsDataPrivacyAPI.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/Manual/UnityAnalyticsDataPrivacyAPI.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/UnityAnalyticsDataPrivacyAPI.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/UnityAnalyticsDataPrivacyAPI.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/UnityAnalyticsDataPrivacyAPI.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/UnityAnalyticsDataPrivacyAPI.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/UnityAnalyticsDataPrivacyAPI.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/UnityAnalyticsDataPrivacyAPI.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/UnityAnalyticsDataPrivacyAPI.html">5.6</a></li>
</ul></div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2018.1/Documentation/Manual/UnityAnalyticsDataPrivacyAPI.html">English</a></li>
<li><a data-lang="ja" href="/ja/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html">日本語</a></li>
<li><a data-lang="es" href="/es/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html">Español</a></li>
<li><a data-lang="kr" href="/kr/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html">한국어</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>Manual</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2018.1</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.3" href="/zh_CN/2019.3/Manual/UnityAnalyticsDataPrivacyAPI.html">2019.3</a></li>
<li><a class="docs_version_url_2019.2" href="/zh_CN/2019.2/Manual/UnityAnalyticsDataPrivacyAPI.html">2019.2</a></li>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/UnityAnalyticsDataPrivacyAPI.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/Manual/UnityAnalyticsDataPrivacyAPI.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/UnityAnalyticsDataPrivacyAPI.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/UnityAnalyticsDataPrivacyAPI.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/UnityAnalyticsDataPrivacyAPI.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/UnityAnalyticsDataPrivacyAPI.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/UnityAnalyticsDataPrivacyAPI.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/UnityAnalyticsDataPrivacyAPI.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/UnityAnalyticsDataPrivacyAPI.html">5.6</a></li>
</ul></div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity 用户手册 (2018.1)</a></li>
<li><a href="UnityServices.html">Unity 服务</a></li>
<li><a href="UnityAnalytics.html">Unity Analytics</a></li>
<li><a href="UnityAnalyticsDataPrivacy.html">Unity Analytics 和欧盟一般数据保护条例 (GDPR)</a></li>
<li>Unity Analytics DataPrivacy API</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UnityAnalyticsDataPrivacy.html"></a></span><div class="tip">Unity Analytics 和欧盟一般数据保护条例 (GDPR)</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UnityAnalyticsTerminology.html"></a></span><div class="tip">Analytics 指标、细分段和术语</div>
</div>
</div></div>
<h1>Unity Analytics DataPrivacy API</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>The <code>DataPrivacy</code> class configures the Unity Analytics service based on the player’s data privacy management choices.</p>

<p>NAMESPACE: <code>UnityEngine.Analytics</code></p>

<pre><code>    public class DataPrivacy
</code></pre>

<p>The <code>DataPrivacy</code> class automatically fetches the player’s data privacy status and configures the Analytics service accordingly.</p>

<p>Use the <code>FetchPrivacyUrl()</code> function to fetch the the URL of the player’s personal data management page. Open the URL to give the player the option to manage their data privacy settings.</p>

<p>This page details three functions:</p>

<ul>
<li>
<a href="#init">Initialize()</a> - Prepares the Data Privacy API for use.</li>
<li>
<a href="#optout">FetchOptOutStatus(Action&lt;bool&gt;)</a> - Fetches the player’s current opt-out status and configures the Unity Analytics service.</li>
<li>
<a href="#privacyurl">FetchPrivacyUrl(Action&lt;String&gt;, Action&lt;String&gt;)</a> - Gets the URL of the player’s personal data management page.</li>
</ul>

<p><a name="init"></a></p>

<h2>Initialize()</h2>

<p>Prepares the Data Privacy API for use.</p>

<h3>Declaration</h3>

<pre><code>    public static void Initialize()
</code></pre>

<h3>Details</h3>

<p>This function creates a hidden GameObject and adds an instance of the <code>DataPrivacy</code> class to it as a component.</p>

<p>On Unity 5.1 or earlier, call <code>Initialize()</code> early in your application startup (ideally, right after you call <code>UnityAnalytics.StartSDK (projectId)</code>. Newer versions of Unity call <code>Initialize()</code> automatically. </p>

<p><a name="optout"></a></p>

<h2>FetchOptOutStatus(Action&lt;bool&gt;)</h2>

<p>Fetches the player’s current opt-out status and configures the Unity Analytics service.</p>

<h3>Declaration</h3>

<pre><code>    public static void FetchOptOutStatus(Action&lt;bool&gt; optOutAction = null)
</code></pre>

<h3>Parameters</h3>

<ul>
<li>[optional] <code>Action&lt;bool&gt; optOutAction</code> — The Action object to invoke when Unity has fetched the player’s opt-out status. The boolean parameter passed to your Action is <code>true</code> if the player has opted out of personal data collection, and <code>false</code> if they have not.</li>
</ul>

<h3>Details</h3>

<p>The function configures the Analytics service as appropriate for the player’s data collection choices. Unity caches the status for use when the player’s computer or device is offline.</p>

<p>Unity calls <code>FetchOptOutStatus()</code> automatically when your game launches. You should also call the function when the player returns to your app after closing the data privacy management URL, to immediately apply any changes they made while on that page.</p>

<p>You can also use <code>FetchOptOutStatus()</code> and pass an <code>Action&lt;bool&gt;</code> function parameter to get a player’s opt-out choice. The plug-in invokes the <code>optOutAction</code> function you provide when the network fetch request is complete. The boolean argument passed to your action is <code>true</code> when the player has opted out and <code>false</code>, if they have not. If the network request for the player’s status fails, Unity calls your <code>optOutAction</code> function with the cached value (or <code>false</code>, if the status has never been set).</p>

<pre><code>    void OnOptOutStatus(bool optOut)
    {
        if(optOut)
        {
            Debug.Log("Player has opted-out of personal data collection.");
        }
    }

    // ...
    DataPrivacy.FetchOptOutStatus(OnOptOutStatus);
</code></pre>

<p><a name="privacyurl"></a></p>

<h2>FetchPrivacyUrl(Action&lt;String&gt;, Action&lt;String&gt;)</h2>

<p>Gets the URL of the player’s personal data management page.</p>

<h3>Declaration</h3>

<pre><code>    public static void FetchPrivacyUrl(Action&lt;string&gt; success, Action&lt;string&gt; failure = null)
</code></pre>

<h3>Parameters</h3>

<ul>
<li><p><code>Action&lt;String&gt; success</code> — The Action object to invoke when the URL is successfully retrieved. The string passed to the Action contains the URL.</p></li>
<li><p>[optional] <code>Action&lt;String&gt; failure</code> — The Action object to invoke when Unity cannot retrieve the URL. The string passed to the Action contains the reason for the failure.</p></li>
</ul>

<h3>Details</h3>

<p>Open the URL passed to your <code>success</code> function in a browser or webview to give the player the opportunity to manage their data protection options. Use <code>Application.OpenURL()</code> to open the page.</p>

<p>The URL is valid for a short period of time. Always fetch the URL immediately before opening it.</p>

<p>Call <code>FetchOptOutStatus()</code> after the player returns to your game to apply any changes immediately. Otherwise, Unity applies any changes to data collection the next time the player launches your game.</p>

<hr>

<ul>
<li><span class="page-edit">2018–05–18 Page published with limited <a href="DocumentationEditorialReview.html">editorial review</a>
</span></li>
<li><span class="page-history">Removed Editor menu command for inserting the Data Privacy button. Added the Data Privacy Button prefab.</span></li>
<li><span class="page-history">New feature in Unity 2018.1</span></li>
</ul>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UnityAnalyticsDataPrivacy.html"></a></span><div class="tip">Unity Analytics 和欧盟一般数据保护条例 (GDPR)</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UnityAnalyticsTerminology.html"></a></span><div class="tip">Analytics 指标、细分段和术语</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">Copyright © 2018 Unity Technologies. Publication 2018.1</div>
<div class="menu">
<a href="https://unity3d.com/learn">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
