<!DOCTYPE html><html class="no-js" lang="zh_CN">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<meta property="og:title" content="事件函数执行顺序 - Unity Manual">
<title>事件函数执行顺序 - Unity Manual</title>
<meta property="og:image" content="https://docs.unity3d.com/zh_CN/2018.1/uploads/Main/monobehaviour_flowchart.svg">
<meta name="description" content="在 Unity 脚本中，有许多事件函数在脚本执行时按预定顺序执行。此执行顺序如下所述：">
<meta property="og:description" content="在 Unity 脚本中，有许多事件函数在脚本执行时按预定顺序执行。此执行顺序如下所述：">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFiles/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script>
      var docs_type = 'Manual';
      var lang = 'zh_CN';
      var page = 'ExecutionOrder';
      if(!page) page = 'index';
      var version = '2018.1';
      var docs_versions = [{version: '2019.3',version_string: '2019.3'},{version: '2019.2',version_string: '2019.2'},{version: '2019.1',version_string: '2019.1'},{version: '2018.4',version_string: '2018.4'},{version: '2018.3',version_string: '2018.3'},{version: '2018.2',version_string: '2018.2'},{version: '2018.1',version_string: '2018.1'},{version: '2017.4',version_string: '2017.4'},{version: '2017.3',version_string: '2017.3'},{version: '2017.2',version_string: '2017.2'},{version: '2017.1',version_string: '2017.1'},{version: '5.6',version_string: '560'},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/zh_CN/2018.1/Manual/ExecutionOrder.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2018.1/Manual/ExecutionOrder.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/ja/2018.1/Manual/ExecutionOrder.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/es/2018.1/Manual/ExecutionOrder.html" hreflang="es">
<link rel="alternate" href="https://docs.unity3d.com/kr/2018.1/Manual/ExecutionOrder.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/2018.1/Documentation/Manual/ExecutionOrder.html" hreflang="x-default">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2018.1</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.3" href="/zh_CN/2019.3/Manual/ExecutionOrder.html">2019.3</a></li>
<li><a class="docs_version_url_2019.2" href="/zh_CN/2019.2/Manual/ExecutionOrder.html">2019.2</a></li>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/ExecutionOrder.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/Manual/ExecutionOrder.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/ExecutionOrder.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/ExecutionOrder.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/ExecutionOrder.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/ExecutionOrder.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/ExecutionOrder.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/ExecutionOrder.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/ExecutionOrder.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/ExecutionOrder.html">5.6</a></li>
</ul></div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2018.1/Documentation/Manual/ExecutionOrder.html">English</a></li>
<li><a data-lang="ja" href="/ja/2018.1/Manual/ExecutionOrder.html">日本語</a></li>
<li><a data-lang="es" href="/es/2018.1/Manual/ExecutionOrder.html">Español</a></li>
<li><a data-lang="kr" href="/kr/2018.1/Manual/ExecutionOrder.html">한국어</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>Manual</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2018.1</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.3" href="/zh_CN/2019.3/Manual/ExecutionOrder.html">2019.3</a></li>
<li><a class="docs_version_url_2019.2" href="/zh_CN/2019.2/Manual/ExecutionOrder.html">2019.2</a></li>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/ExecutionOrder.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/Manual/ExecutionOrder.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/ExecutionOrder.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/ExecutionOrder.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/ExecutionOrder.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/ExecutionOrder.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/ExecutionOrder.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/ExecutionOrder.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/ExecutionOrder.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/ExecutionOrder.html">5.6</a></li>
</ul></div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity 用户手册 (2018.1)</a></li>
<li><a href="ScriptingSection.html">脚本</a></li>
<li><a href="ScriptingConcepts.html">脚本概述</a></li>
<li>事件函数执行顺序</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="Attributes.html"></a></span><div class="tip">特性</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UnderstandingAutomaticMemoryManagement.html"></a></span><div class="tip">了解自动内存管理</div>
</div>
</div></div>
<h1>事件函数执行顺序</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>在 Unity 脚本中，有许多事件函数在脚本执行时按预定顺序执行。此执行顺序如下所述：</p>

<h2>加载第一个场景</h2>

<p>场景开始时将调用以下函数（为场景中的每个对象调用一次）。</p>

<ul>
<li>
<strong>Awake：</strong>始终在任何 Start 函数之前并在实例化预制件之后调用此函数。（如果游戏对象在启动期间处于非活动状态，则在激活之后才会调用 Awake。）</li>
<li>
<strong>OnEnable：</strong>（仅在对象处于激活状态时调用）在启用对象后立即调用此函数。在创建 MonoBehaviour 实例时（例如加载关卡或实例化具有脚本组件的游戏对象时）会执行此调用。</li>
<li>
<strong>OnLevelWasLoaded：</strong>执行此函数可告知游戏已加载新关卡。</li>
</ul>

<p>请注意，对于添加到场景中的对象，在为任何对象调用 Start 和 Update 等函数之前，会为_所有_脚本调用 Awake 和 OnEnable 函数。当然，在游戏运行过程中实例化对象时，不能强制执行此调用。</p>

<h2>Editor</h2>

<ul>
<li>
<strong>Reset：</strong>调用 Reset 可以在脚本首次附加到对象时以及使用 <em>Reset</em> 命令时初始化脚本的属性。</li>
</ul>

<h2>在第一次帧更新之前</h2>

<ul>
<li>
<strong>Start：</strong>仅当启用脚本实例后，才会在第一次帧更新之前调用 Start。</li>
</ul>

<p>对于添加到场景中的对象，在为任何脚本调用 Update 等函数之前，将在所有脚本上调用 Start 函数。当然，在游戏运行过程中实例化对象时，不能强制执行此调用。</p>

<h2>帧之间</h2>

<ul>
<li>
<strong>OnApplicationPause：</strong>在帧的结尾处调用此函数（在正常帧更新之间有效检测到暂停）。在调用 <strong>OnApplicationPause</strong> 之后，将发出一个额外帧，从而允许游戏显示图形来指示暂停状态。</li>
</ul>

<h2>更新顺序</h2>

<p>跟踪游戏逻辑和交互、动画、摄像机位置等的时候，可以使用一些不同事件。常见方案是在 <strong>Update</strong> 函数中执行大多数任务，但是也可以使用其他函数。</p>

<ul>
<li><p><strong>FixedUpdate：</strong>调用 <strong>FixedUpdate</strong> 的频度常常超过 <strong>Update</strong>。如果帧率很低，可以每帧调用该函数多次；如果帧率很高，可能在帧之间完全不调用该函数。在 <strong>FixedUpdate</strong> 之后将立即进行所有物理计算和更新。在 <strong>FixedUpdate</strong> 内应用运动计算时，无需将值乘以 <strong>Time.deltaTime</strong>。这是因为 <strong>FixedUpdate</strong> 的调用基于可靠的计时器（独立于帧率）。</p></li>
<li><p><strong>Update：</strong>每帧调用一次 <strong>Update</strong>。这是用于帧更新的主要函数。</p></li>
<li><p><strong>LateUpdate：</strong>每帧调用一次 <strong>LateUpdate__（在 </strong>Update__ 完成后）。<strong>LateUpdate</strong> 开始时，在 <strong>Update</strong> 中执行的所有计算便已完成。<strong>LateUpdate</strong> 的常见用途是跟随第三人称摄像机。如果在 <strong>Update</strong> 内让角色移动和转向，可以在 <strong>LateUpdate</strong> 中执行所有摄像机移动和旋转计算。这样可以确保角色在摄像机跟踪其位置之前已完全移动。</p></li>
</ul>

<h2>渲染</h2>

<ul>
<li>
<strong>OnPreCull：</strong>在摄像机剔除场景之前调用。剔除操作将确定摄像机可以看到哪些对象。正好在进行剔除之前调用 OnPreCull。</li>
<li>
<strong>OnBecameVisible/OnBecameInvisible：</strong>对象变为对任何摄像机可见/不可见时调用。</li>
<li>
<strong>OnWillRenderObject：</strong>如果对象可见，则为每个摄像机调用<strong>一次</strong>。</li>
<li>
<strong>OnPreRender：</strong>在摄像机开始渲染场景之前调用。</li>
<li>
<strong>OnRenderObject：</strong>所有常规场景渲染完成之后调用。此时，可以使用 <a href="../ScriptReference/GL.html">GL</a> 类或 <a href="../ScriptReference/Graphics.DrawMeshNow.html">Graphics.DrawMeshNow</a> 来绘制自定义几何形状。</li>
<li>
<strong>OnPostRender：</strong>在摄像机完成场景渲染后调用。</li>
<li>
<strong>OnRenderImage：</strong>在场景渲染完成后调用以允许对图像进行后处理，请参阅<a href="PostProcessingOverview.html">后期处理效果</a>。</li>
<li>
<strong>OnGUI：</strong>每帧调用多次以响应 GUI 事件。首先处理布局和重新绘制事件，然后为每个输入事件处理布局和键盘/鼠标事件。</li>
<li>
<strong>OnDrawGizmos</strong> 用于在场景视图中绘制辅助图标以实现可视化。</li>
</ul>

<h2>协程</h2>

<p>Update 函数返回后将运行正常协程更新。协程是一个可暂停执行 (yield) 直到给定的 YieldInstruction 达到完成状态的函数。
协程的不同用法：</p>

<ul>
<li>
<strong>yield</strong> 在下一帧上调用所有 Update 函数后，协程将继续。</li>
<li>
<strong>yield WaitForSeconds</strong> 在为帧调用所有 Update 函数后，在指定的时间延迟后继续协程</li>
<li>
<strong>yield WaitForFixedUpdate</strong> 在所有脚本上调用所有 FixedUpdate 后继续协程</li>
<li>
<strong>yield WWW</strong> 在 WWW 下载完成后继续。</li>
<li>
<strong>yield StartCoroutine</strong> 将协程链接起来，并会等待 MyFunc 协程先完成。</li>
</ul>

<h2>销毁游戏对象时</h2>

<ul>
<li>
<strong>OnDestroy：</strong>对象存在的最后一帧完成所有帧更新之后，调用此函数（可能应 Object.Destroy 要求或在场景关闭时销毁该对象）。</li>
</ul>

<h2>退出时</h2>

<p>在场景中的所有活动对象上调用以下函数：</p>

<ul>
<li>
<strong>OnApplicationQuit：</strong>在退出应用程序之前在所有游戏对象上调用此函数。在编辑器中，用户停止播放模式时，调用函数。</li>
<li>
<strong>OnDisable：</strong>行为被禁用或处于非活动状态时，调用此函数。</li>
</ul>

<h2>脚本生命周期流程图</h2>

<p>下图总结了脚本生命周期中事件函数的排序和重复出现情况。</p>

<figure>
<img src="../uploads/Main/monobehaviour_flowchart.svg" alt="">
</figure>

<p><strong>注意</strong>：有些浏览器不支持 SVG 图像文件。如果以上图像未正确显示（例如，如果看不到任何文字），请尝试其他浏览器，例如 <a href="https://www.google.com/chrome/">Google Chrome</a> 或 <a href="https://www.mozilla.org/">Mozilla Firefox</a>。</p>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="Attributes.html"></a></span><div class="tip">特性</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UnderstandingAutomaticMemoryManagement.html"></a></span><div class="tip">了解自动内存管理</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">Copyright © 2018 Unity Technologies. Publication 2018.1</div>
<div class="menu">
<a href="https://unity3d.com/learn">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
